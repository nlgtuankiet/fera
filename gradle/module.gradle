apply from: "../gradle/config.gradle"

if (dynamic) {
  apply plugin: "com.android.dynamic-feature"
} else {
  apply plugin: "com.android.library"
}

apply plugin: "kotlin-android"
apply plugin: "kotlin-kapt"
apply plugin: 'com.jakewharton.butterknife'

kapt {
  correctErrorTypes true
}

android {
  compileSdkVersion compileSdk
  buildToolsVersion buildTools
  defaultConfig {
    minSdkVersion minSdk
    targetSdkVersion targetSdk
    versionCode vcode
    versionName vname
    testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
  }
  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
  }
  kotlinOptions {
    jvmTarget = JavaVersion.VERSION_1_8.toString()
    freeCompilerArgs = ["-XXLanguage:+InlineClasses"]
  }
  buildFeatures {
    viewBinding true
  }

  if (dynamic) {
    buildTypes {
      release {}
      debug {}
    }
  }
  dependencies {
    kapt deps.daggerProcessor
    if (dynamic) {
      implementation project(":app")
    } else {
      implementation deps.mvrx
      implementation deps.appCompat
      implementation deps.fragment
      implementation deps.inject
      implementation deps.constraintLayout
      implementation deps.kotlinCoroutine
      implementation deps.moshi
      implementation deps.dagger
      implementation deps.exec
      implementation deps.epoxy
      implementation deps.assistedInject
      kapt deps.assistedInjectProccesor
      kapt deps.epoxyProcessor

      implementation deps.execKiller
      implementation project(":core")
      implementation project(":domain")
    }
  }
}